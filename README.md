

# Poll Automation App

Poll Automation App is a standalone, open-source web application designed to intelligently generate and manage live polls in real-time during lectures, webinars, or meetingsâ€”without being tied to any specific video conferencing platform.

## âš™ï¸ Project Pipeline

[![](https://mermaid.ink/img/pako:eNqVlVtu2zgUhrdCsCjQYqRAki3L1gAFrNtMB3HrRgEC1O4DIzERJzIpkFQTT5otdAt96QK7hJKipMTTFoX9YOicQ37nwh_kPSxYiWEIr2p2W1SIS3B6tqVA_Z4_B8u2JAzkrOUFNs4VKTbfvnz-Cv5mQvbx17Rp5YcwDHekALb96tMWnuGC8ZLQa_CRILDCJUHGhfkWfgLLTcYZlZiWwNZIzpqKUZxLjtEOc8266hds6VjNukICAzcE-fk5eJE3GBeVLZl9ju_kS7Nq2efPpe7kDxARivje1KkTR5sIFTcm7xvV-Mm_AlzkIMf8o0l7acKGFvW0jPFbxEuwjlcgrlp6IzQr3lxURDSYd9tJgRUzQ0Iu16-7BtQnaoghxT3pnCMqCk4aSRgF_-Rv33RVHaZLd0SCMyzaWnbju8CXOVNlyW50PwzEC8Hp6Qq8a7HoqH9hijnSn4fYXLf9WMCYPdmsWV2rXR3G_gHEusHU9c7gkh7XR3E5bhA_6SWv2O3hgnTTSSdBorpkeqq26hUVnYAqFTH707HoGhdPk_wkx7oVFZAM6DZ0ONvksi0x_UUSYYKGkY2CMTvU2BtVKB56GWedy32t9GzsokZCJPgKaMVfkboOn2VZGqWpJSRnNzh8FgVu7MZWwWrGR8sE7VtSyir0mjuL34WuY_G9-v_zf-RB_z0-dbIgW454x5k5s-mA761j8L3Ox-KzSeqM9DSbxY4z0HvrqOKN9ofa55mfLka6lwbJxBvovXUMXUlxqDtOp2k8kmPPnfvRQO6tY8haf0PRbuZnj-fpeEEQJePAjXUMulfd48CTNBjp2WI59_yB3lu_oT_h6ytUS_FpTnUVDhI6cEfD0R944-HIDryJHvWBJ-1GdODKhtaUF1pQXd87REr1otzrVVsoK7zDWxiqzxLxmy3c0ge1DrWS5XtawFDyFluQs_a6gurWrIWy2qZUV0tC0DVHu9HbIPqesd2wRZkwvId3MLTduXsyCRx_Og0Wk4XvTAML7mGoFHASTJzZzPecmefNfP_Bgv91COdk4c_n3mLhOGq96_sTC6pnSt12K_Mgdu-iBa-5bqavUY0N85i1VCq2Fzx8B4HXS30?type=png)](https://mermaid.live/edit#pako:eNqVlVtu2zgUhrdCsCjQYqRAki3L1gAFrNtMB3HrRgEC1O4DIzERJzIpkFQTT5otdAt96QK7hJKipMTTFoX9YOicQ37nwh_kPSxYiWEIr2p2W1SIS3B6tqVA_Z4_B8u2JAzkrOUFNs4VKTbfvnz-Cv5mQvbx17Rp5YcwDHekALb96tMWnuGC8ZLQa_CRILDCJUHGhfkWfgLLTcYZlZiWwNZIzpqKUZxLjtEOc8266hds6VjNukICAzcE-fk5eJE3GBeVLZl9ju_kS7Nq2efPpe7kDxARivje1KkTR5sIFTcm7xvV-Mm_AlzkIMf8o0l7acKGFvW0jPFbxEuwjlcgrlp6IzQr3lxURDSYd9tJgRUzQ0Iu16-7BtQnaoghxT3pnCMqCk4aSRgF_-Rv33RVHaZLd0SCMyzaWnbju8CXOVNlyW50PwzEC8Hp6Qq8a7HoqH9hijnSn4fYXLf9WMCYPdmsWV2rXR3G_gHEusHU9c7gkh7XR3E5bhA_6SWv2O3hgnTTSSdBorpkeqq26hUVnYAqFTH707HoGhdPk_wkx7oVFZAM6DZ0ONvksi0x_UUSYYKGkY2CMTvU2BtVKB56GWedy32t9GzsokZCJPgKaMVfkboOn2VZGqWpJSRnNzh8FgVu7MZWwWrGR8sE7VtSyir0mjuL34WuY_G9-v_zf-RB_z0-dbIgW454x5k5s-mA761j8L3Ox-KzSeqM9DSbxY4z0HvrqOKN9ofa55mfLka6lwbJxBvovXUMXUlxqDtOp2k8kmPPnfvRQO6tY8haf0PRbuZnj-fpeEEQJePAjXUMulfd48CTNBjp2WI59_yB3lu_oT_h6ytUS_FpTnUVDhI6cEfD0R944-HIDryJHvWBJ-1GdODKhtaUF1pQXd87REr1otzrVVsoK7zDWxiqzxLxmy3c0ge1DrWS5XtawFDyFluQs_a6gurWrIWy2qZUV0tC0DVHu9HbIPqesd2wRZkwvId3MLTduXsyCRx_Og0Wk4XvTAML7mGoFHASTJzZzPecmefNfP_Bgv91COdk4c_n3mLhOGq96_sTC6pnSt12K_Mgdu-iBa-5bqavUY0N85i1VCq2Fzx8B4HXS30)

## ğŸ“ Monorepo Project Structure (Turborepo)

```
poll-automation/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ backend/                    # Node.js + Express backend
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ services/           # LLM forwarding, WebSocket handling
â”‚   â”‚   â”‚   â”œâ”€â”€ web/                # REST API routes, controllers, models
â”‚   â”‚   â”‚   â””â”€â”€ ws/                 # WebSocket server for audio streaming
â”‚   â”‚   â”œâ”€â”€ .env                    # Backend environment variables
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”œâ”€â”€ frontend/                   # React + TypeScript + Vite frontend
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/         # Reusable UI components
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/              # Page components (e.g., AudioCapture, GuestPage)
â”‚   â”‚   â”‚   â”œâ”€â”€ transcription/      # Audio recording and transcription utils
â”‚   â”‚   â”‚   â””â”€â”€ contexts/           # React context for auth, theme, loading
â”‚   â”‚   â”œâ”€â”€ .env                    # Frontend environment variables
â”‚   â”‚   â””â”€â”€ package.json
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ whisper/                    # Python FastAPI Whisper transcription service
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/              # Whisper model loader
â”‚   â”‚   â”‚   â””â”€â”€ websocket/          # WebSocket handler for transcription
â”‚   â”‚   â”œâ”€â”€ .env                    # Whisper service environment variables
â”‚   â”‚   â””â”€â”€ requirements.txt
â”‚   â”œâ”€â”€ pollgen-llm/                # Python FastAPI LLM service for poll generation
â”‚   â”‚   â”œâ”€â”€ sample_transcripts/     # Sample transcript data
â”‚   â”‚   â”œâ”€â”€ .env                    # LLM service environment variables
â”‚   â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ shared/
â”‚   â””â”€â”€ types/                      # Shared TypeScript types
â”œâ”€â”€ .gitignore                      # Git ignore rules
â”œâ”€â”€ package.json                    # Monorepo package configuration
â”œâ”€â”€ pnpm-workspace.yaml             # pnpm workspace configuration
â”œâ”€â”€ turbo.json                      # Turborepo configuration
â””â”€â”€ README.md                       # This file
```

## ğŸš€ Getting Started

### ğŸ”§ Prerequisites

- **Node.js**: v18 or higher
- **pnpm**: v8 or higher (`npm install -g pnpm`)
- **Turborepo**: Install globally (`pnpm add -g turbo`)
- **Python**: 3.9 or higher
- **MongoDB**: Running locally on `mongodb://localhost:27017`
- **Ollama**: For local LLM support (optional)

### ğŸ”§ Python Environment Setup

#### Whisper Service

1. **Navigate to the Whisper service folder:**

```bash
cd services/whisper
```

2. **Create and activate a Python virtual environment:**

```bash
# Windows
python -m venv whisper-env
whisper-env\Scripts\activate

# macOS/Linux
python3 -m venv whisper-env
source whisper-env/bin/activate
```

3. **Install dependencies:**

   - **For CPU-only:**

```bash
pip install --upgrade pip
pip install -r requirements.txt
```

   - **For GPU support (CUDA 12.1):**

```bash
pip install -r requirements.gpu.txt --extra-index-url https://download.pytorch.org/whl/cu121
```

#### Pollgen-LLM Service

1. **Navigate to the Pollgen-LLM service folder:**

```bash
cd services/pollgen-llm
```

2. **Create and activate a Python virtual environment:**

```bash
# Windows
python -m venv pollgenenv
pollgenenv\Scripts\activate

# macOS/Linux
python3 -m venv pollgenenv
source pollgenenv/bin/activate
```

3. **Install dependencies:**

```bash
pip install -r requirements.txt
```

### ğŸ”‘ Setting up Gemini API Key

1. Visit [https://ai.google.dev/](https://ai.google.dev/) and sign in with your Google account.
2. Click **â€œGet API keyâ€** and copy the key.
3. Add it to `services/pollgen-llm/.env`:

```env
GEMINI_API_KEY=<your key>
```

### ğŸ§  Setting up Local LLM (Ollama)

1. **Download and Install Ollama:**

   - Visit [https://ollama.com](https://ollama.com/) and download the installer.
   - Follow the setup wizard to complete installation.

2. **Verify Ollama Installation:**

```bash
ollama --version
```

3. **Pull Required Models:**

```bash
ollama pull llama3.2
ollama pull mxbai-embed-large
```

4. **Confirm Model Names:**

```bash
ollama list
```

### ğŸ”§ .env Configuration

#### `apps/backend/.env`

```env
PORT=3000
WHISPER_WS_URL=ws://localhost:8000
MONGO_URI=mongodb://localhost:27017
LLM_FORWARD_URL=ws://localhost:5001/ws/llm
```

#### `apps/frontend/.env`

```env
VITE_BACKEND_WS_URL=ws://localhost:3000
VITE_BACKEND_WS_URL_GUEST=ws://localhost:3000
VITE_CHUNK_INTERVAL=30000
```

#### `services/whisper/.env`

```env
WHISPER_MODEL_SIZE=small
BUFFER_DURATION_SECONDS=60
WHISPER_SERVICE_PORT=8000
```

Available Whisper model sizes: `tiny`, `base`, `small`, `medium`, `large-v1`, `large-v2`, `large-v3`.

#### `services/pollgen-llm/.env`

```env
GEMINI_API_KEY=<your Gemini API key>
MONGO_URI=mongodb://localhost:27017
HOME=<your home directory, e.g., "C:\Users\YourUsername">
```

### ğŸ› ï¸ Monorepo Setup

1. **Install global dependencies:**

```bash
npm install -g pnpm
pnpm add -g turbo
```

2. **Install project dependencies:**

```bash
pnpm install
```

3. **Start all development servers:**

```bash
pnpm dev
```

This starts:
- âœ… *Frontend*: [http://localhost:5173](http://localhost:5173)
- âœ… *Backend (WebSocket server)*: ws://localhost:3000
- âœ… *Whisper Transcription Service*: ws://localhost:8000
- âœ… *Pollgen-LLM Service*: ws://localhost:5001/ws/llm

> Ensure Python environments for `whisper` and `pollgen-llm` are activated.

### ğŸ›† Using Turborepo

- `pnpm build`: Build all apps/services
- `pnpm lint`: Lint all projects
- `pnpm test`: Run tests
- `turbo run <task>`: Run any task across monorepo

## ğŸ—£ï¸ Phase 1 â€“ Transcription Pipeline

The real-time transcription flow:
1. **Frontend** captures audio via `AudioCapture.tsx` or `GuestPage.tsx`, sending `.wav` chunks over WebSocket.
2. **Backend** WebSocket server (`ws-server.ts`) forwards audio to the Whisper service.
3. **Whisper Service** processes audio using Faster-Whisper, returning JSON transcriptions.
4. **Backend** forwards transcriptions to `pollgen-llm` for poll generation or back to the frontend for display.

> Transcriptions are displayed in real-time on `AudioCapture` and `GuestPage` via `LiveTranscriptFeed.tsx`.

## ğŸ§  Phase 2 â€“ LLM-based Poll Generation

The poll generation flow:
1. **Backend** buffers transcriptions (`llm-forwarder.ts`) and sends chunks to `pollgen-llm` via WebSocket.
2. **Pollgen-LLM** uses Gemini or Ollama to generate poll questions based on transcript text and settings (e.g., question type, frequency).
3. **Generated questions** are stored in MongoDB (`pollgen.pollquestions`) and can be retrieved via the backend API.
4. **Frontend** displays AI-generated questions in `AIQuestionFeed.tsx` or allows manual poll creation in `CreateManualPoll.tsx`.

## ğŸ“Š Phase 3 â€“ Realtime Poll Launch and Analytics

- **Poll Launch**: Hosts can launch polls via `CreatePollPage.tsx` or view AI-generated polls in `AIQuestionFeed.tsx`.
- **Participant Tracking**: `Participants.tsx` tracks real-time poll participation.
- **Leaderboard**: `Leaderboard.tsx` and `StudentLeaderboard.tsx` display live rankings.
- **Analytics**: `Reports.tsx` provides detailed poll performance metrics.

## ğŸ“¦ Tech Stack

### Backend
- **Node.js + Express + TypeScript**: REST API and WebSocket server
- **MongoDB**: Stores poll configurations and questions
- **WebSocket**: Real-time audio and transcription streaming

### Frontend
- **React 19 + TypeScript + Vite**: Fast, modern frontend
- **TailwindCSS**: Styling
- **React Router**: Navigation
- **Recharts**: Data visualization
- **Framer Motion**: Animations
- **React Hook Form**: Form handling

### Services
- **Whisper Service**: Python FastAPI with Faster-Whisper for transcription
- **Pollgen-LLM**: Python FastAPI with Gemini or Ollama for poll generation

## ğŸ› ï¸ Features

- **Real-time Transcription**: Live audio capture and transcription for hosts and guests
- **AI Poll Generation**: Automatic poll creation based on lecture content
- **Manual Poll Creation**: Custom poll creation via `CreateManualPoll.tsx`
- **Dashboards**: Host (`HostDashboard.tsx`) and student (`StudentDashboard.tsx`) interfaces
- **Participant Tracking**: Real-time monitoring in `Participants.tsx`
- **Leaderboard**: Live rankings in `Leaderboard.tsx`
- **Analytics**: Detailed reports in `Reports.tsx`
- **Guest Access**: Simplified audio input for guests via `GuestPage.tsx`
- **Customizable Settings**: Question frequency, type, and difficulty controls

## ğŸ› ï¸ Development Workflow

- **Turborepo**: Use `--filter` to target specific apps (e.g., `pnpm --filter @poll-automation/backend run dev`).
- **pnpm**: Add dependencies with `pnpm add <package> --filter <workspace>`.
- **Git**:
  - Work in feature branches (e.g., `git checkout -b feature/audio-streaming`).
  - Submit PRs to the `development` branch.
  - Include both transcription and web app teams in PR reviews.

<!-- ## ğŸ§ª Testing

- **Unit Tests**: Located in `apps/backend/__tests__` and `apps/frontend/src/__tests__`.
- **Integration Tests**: Cover backend â†” Whisper â†” LLM flows.
- Run tests: `pnpm test` -->

## ğŸ› ï¸ Troubleshooting

- **pnpm Errors**: Run `pnpm install` in the root to sync dependencies.
- **WebSocket Issues**: Verify `WHISPER_WS_URL` and `LLM_FORWARD_URL` in `.env` files.
- **MongoDB Errors**: Ensure MongoDB is running on `mongodb://localhost:27017`.
- **Whisper Service**: Confirm the correct model size in `services/whisper/.env`.
- **TypeScript Errors**: Check `tsconfig.json` paths for `@poll-automation/types`.

<!-- ## ğŸ“„ License

Internal use only. Contact project maintainers for details. -->

